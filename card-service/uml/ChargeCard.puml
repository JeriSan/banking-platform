@startuml
title Sequence: Credit Card Charge

actor Client
Client -> CardController: POST /api/cards/{id}/charge?amount=120
CardController -> CardService: charge(id, amount)

CardService -> CreditCardRepository: findById(id)
CreditCardRepository --> CardService: card

CardService -> CreditCardRepository: save(updatedCardBalance)
CardService -> CardMovementRepository: save(cardMovement)

CreditCardRepository --> CardService: cardUpdated
CardMovementRepository --> CardService: movementSaved

CardService --> CardController: updatedCard
CardController --> Client: 200 OK + new balance
@enduml
